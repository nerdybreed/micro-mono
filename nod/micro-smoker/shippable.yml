# language setting
language: node_js

# version numbers, testing against two versions of node
node_js:
  - 0.10.33

env:
  global:
    - NOUVOLA_PLAN_ID=3210
    - secure: FFBcn4HfaggIDYZMJBPAJ8AGeiyO/XNmgOfymwhvhMUdADd5tJK7fbr5cn+mxJ6g7yRpxXhpx4orxy3kMUJRlWfgkjbaod5kp4UJMLe6IebDO9OG4OVVJorFX5A/LfhaiYWiii/WsOE5miuXol0XuuJluKuVOUkKcFq9DylehZH6sP40Re3YprEmRojLJ55nKc4e1g/sOR0Ns9ZvfmtyKny4dgOfOoF8tSOLrkqiv8CGjLbTTtGIhslQ29myUFtO59IZCJq/90wnvCgBHp5poE8P1ZEjfHKO7iQDZZ/DBy81ZrWuHtxhSfQ3jH/+5+7CKH15dRAZeegILPZi3whYsQ==

build:
  pre_ci:
    - node --version
    - docker build -t="ttrahan/$REPO:$BRANCH.$BUILD_NUMBER" .
  pre_ci_boot:
    image_name: ttrahan/$REPO:$BRANCH.$BUILD_NUMBER
    image_tag: latest
    pull: false
    options: --privileged=true
  ci:
    - cat apiCall.sh | sed "s/{NOUVOLA_API_KEY}/$NOUVOLA_API_KEY/" | sed "s/{NOUVOLA_PLAN_ID}/$NOUVOLA_PLAN_ID/" > apiCall.sh
    - which bash
    - ./apiCall.sh
